{% extends 'app/base.html' %}
{% load static %}
{% block title %}Profile{% endblock title %}

{% block main-content %}
<div class="container my-5">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-3 mb-3">
      <div class="card shadow-sm border-0 rounded-3">
        <div class="card-body p-3 text-center">
          <!-- Profile Picture -->
          <img src="{% static 'app/images/default-profile.png' %}" alt="Profile Picture"
               class="rounded-circle img-fluid mb-3" style="width:100px; height:100px; object-fit:cover;">
          <h6 class="fw-bold text-capitalize">{{ request.user }}</h6>
          <small class="text-muted">{{ request.user.email }}</small>
          <hr>
          <ul class="list-unstyled text-start">
            <li class="mb-2">
              <a href="{% url 'profile' %}" class="btn w-100 text-start {{active}}">
                <i class="fas fa-user me-2"></i> Profile
              </a>
            </li>
            <li class="mb-2">
              <a href="{% url 'address' %}" class="btn w-100 text-start">
                <i class="fas fa-map-marker-alt me-2"></i> Address
              </a>
            </li>
            <li class="mb-2">
              <a href="#" class="btn w-100 text-start">
                <i class="fas fa-box me-2"></i> My Orders
              </a>
            </li>
            <li>
              <a href="#" class="btn w-100 text-start">
                <i class="fas fa-heart me-2"></i> Wishlist
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Profile Form + Orders -->
    <div class="col-md-9">
      <!-- Profile Info -->
      <div class="card shadow-sm border-0 rounded-3 mb-4">
        <div class="card-body p-4">
          <h4 class="fw-bold mb-4">Edit Profile</h4>
          <form action="" method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}
            <div class="row g-3">
              {% for f in form %}
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ f.label }}</label>
                {{ f }}
                {% if f.errors %}
                  <div class="text-danger small">{{ f.errors|striptags }}</div>
                {% endif %}
              </div>
              {% endfor %}
            </div>
            <div class="mt-4">
              <button type="submit" class="btn btn-dark px-4">
                <i class="fas fa-save me-2"></i> Save Changes
              </button>
            </div>
          </form>
          <!-- Messages -->
          {% if messages %}
            <div class="mt-3">
              {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                  {{ message }}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Order History -->
      <div class="card shadow-sm border-0 rounded-3">
        <div class="card-body p-4">
          <h4 class="fw-bold mb-3">My Orders</h4>
          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>#</th>
                  <th>Product</th>
                  <th>Date</th>
                  <th>Status</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                <!-- Example Orders -->
                <tr>
                  <td>1</td>
                  <td>Nike Sneakers</td>
                  <td>15 Sep 2025</td>
                  <td><span class="badge bg-success">Delivered</span></td>
                  <td>৳ 3,500</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Adidas Hoodie</td>
                  <td>10 Sep 2025</td>
                  <td><span class="badge bg-warning text-dark">Pending</span></td>
                  <td>৳ 2,200</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>Zara T-Shirt</td>
                  <td>5 Sep 2025</td>
                  <td><span class="badge bg-danger">Cancelled</span></td>
                  <td>৳ 1,200</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock main-content %}

{% block extra_css %}
<style>
  .card {
    border-radius: 12px !important;
  }
  .btn {
    border-radius: 8px;
    transition: 0.3s;
  }
  .btn:hover {
    background-color: #e75480;
    color: #fff;
  }
  .badge {
    font-size: 0.85rem;
    padding: 0.4em 0.6em;
  }
</style>
{% endblock extra_css %}
